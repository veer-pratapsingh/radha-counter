"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[867],{47867:(e,t,n)=>{n.r(t),n.d(t,{CameraType:()=>A,MediaTypeOptions:()=>g,PermissionStatus:()=>l,UIImagePickerControllerQualityType:()=>f,UIImagePickerPreferredAssetRepresentationMode:()=>b,UIImagePickerPresentationStyle:()=>w,VideoExportPreset:()=>h,getCameraPermissionsAsync:()=>T,getMediaLibraryPermissionsAsync:()=>x,getPendingResultAsync:()=>O,launchCameraAsync:()=>S,launchImageLibraryAsync:()=>H,requestCameraPermissionsAsync:()=>L,requestMediaLibraryPermissionsAsync:()=>R,useCameraPermissions:()=>k,useMediaLibraryPermissions:()=>_});class i extends Error{constructor(e,t){super(t),this.code=e}}var a=n(98587),s=n(36665);const r=["get","request"];function o(e){return t=>function(e,t){const n=(0,s.useRef)(!0),[i,o]=(0,s.useState)(null),c=t||{},{get:l=!0,request:u=!1}=c,d=(0,a.default)(c,r),m=(0,s.useCallback)(async()=>{const t=await e.getMethod(Object.keys(d).length>0?d:void 0);return n.current&&o(t),t},[e.getMethod]),y=(0,s.useCallback)(async()=>{const t=await e.requestMethod(Object.keys(d).length>0?d:void 0);return n.current&&o(t),t},[e.requestMethod]);return(0,s.useEffect)(function(){u&&y(),!u&&l&&m()},[l,u,y,m]),(0,s.useEffect)(function(){return n.current=!0,()=>{n.current=!1}},[]),[i,y,m]}(e,t)}class c extends i{constructor(e,t){super("ERR_UNAVAILABLE",`The method or property ${e}.${t} is not available on web, are you sure you've linked all the native dependencies properly?`)}}let l=function(e){return e.GRANTED="granted",e.UNDETERMINED="undetermined",e.DENIED="denied",e}({});var u=n(95991);const d="undefined"!==typeof window&&!!window.document?.createElement,m=d&&!(!window.addEventListener&&!window.attachEvent),y=d&&!!window.screen;const p={OS:"web",select:"undefined"!==typeof window?u.default.select:function(e){return e.hasOwnProperty("web")?e.web:e.hasOwnProperty("default")?e.default:void 0},isDOMAvailable:d,canUseEventListeners:m,canUseViewport:y,isAsyncDebugging:!1};var g,h,f,w,b,A;function v(e){const t={Images:["images"],Videos:["videos"],All:["images","videos"]};return e===g.Images||e===g.Videos||e===g.All?(console.warn("[expo-image-picker] `ImagePicker.MediaTypeOptions` have been deprecated. Use `ImagePicker.MediaType` or an array of `ImagePicker.MediaType` instead."),t[e]):"string"===typeof e?[e]:e}function E(e){return e.mediaTypes?Object.assign({},e,{mediaTypes:v(e.mediaTypes??[])}):e}!function(e){e.All="All",e.Videos="Videos",e.Images="Images"}(g||(g={})),function(e){e[e.Passthrough=0]="Passthrough",e[e.LowQuality=1]="LowQuality",e[e.MediumQuality=2]="MediumQuality",e[e.HighestQuality=3]="HighestQuality",e[e.H264_640x480=4]="H264_640x480",e[e.H264_960x540=5]="H264_960x540",e[e.H264_1280x720=6]="H264_1280x720",e[e.H264_1920x1080=7]="H264_1920x1080",e[e.H264_3840x2160=8]="H264_3840x2160",e[e.HEVC_1920x1080=9]="HEVC_1920x1080",e[e.HEVC_3840x2160=10]="HEVC_3840x2160"}(h||(h={})),function(e){e[e.High=0]="High",e[e.Medium=1]="Medium",e[e.Low=2]="Low",e[e.VGA640x480=3]="VGA640x480",e[e.IFrame1280x720=4]="IFrame1280x720",e[e.IFrame960x540=5]="IFrame960x540"}(f||(f={})),function(e){e.FULL_SCREEN="fullScreen",e.PAGE_SHEET="pageSheet",e.FORM_SHEET="formSheet",e.CURRENT_CONTEXT="currentContext",e.OVER_FULL_SCREEN="overFullScreen",e.OVER_CURRENT_CONTEXT="overCurrentContext",e.POPOVER="popover",e.AUTOMATIC="automatic"}(w||(w={})),function(e){e.Automatic="automatic",e.Compatible="compatible",e.Current="current"}(b||(b={})),function(e){e.back="back",e.front="front"}(A||(A={}));const M={images:"image/*",videos:"video/mp4,video/quicktime,video/x-m4v,video/*",livePhotos:""},P={launchImageLibraryAsync:async({mediaTypes:e=["images"],allowsMultipleSelection:t=!1,base64:n=!1})=>p.isDOMAvailable?await C({mediaTypes:e,allowsMultipleSelection:t,base64:n}):{canceled:!0,assets:null},launchCameraAsync:async({mediaTypes:e=g.Images,allowsMultipleSelection:t=!1,base64:n=!1,cameraType:i})=>p.isDOMAvailable?await C({mediaTypes:e,allowsMultipleSelection:t,capture:i??!0,base64:n}):{canceled:!0,assets:null},getCameraPermissionsAsync:async()=>I(),requestCameraPermissionsAsync:async()=>I(),getMediaLibraryPermissionsAsync:async e=>I(),requestMediaLibraryPermissionsAsync:async e=>I()};function I(){return{status:l.GRANTED,expires:"never",granted:!0,canAskAgain:!0}}function C({mediaTypes:e,capture:t=!1,allowsMultipleSelection:n=!1,base64:i}){const a=function(e){const t=e.filter(e=>"livePhotos"!==e);if(0===t.length)return"image/*";let n="";for(const i of t)n.includes(M[i])||(n=n.concat(",",M[i]));return n}(v(e)),s=document.createElement("input");if(s.style.display="none",s.setAttribute("type","file"),s.setAttribute("accept",a),s.setAttribute("id",String(Math.random())),s.setAttribute("data-testid","file-input"),n&&s.setAttribute("multiple","multiple"),t)switch(t){case!0:s.setAttribute("capture","camera");break;case A.front:s.setAttribute("capture","environment");break;case A.back:s.setAttribute("capture","user")}return document.body.appendChild(s),new Promise(e=>{s.addEventListener("change",async()=>{if(s.files?.length){const t=n?s.files:[s.files[0]],a=await Promise.all(Array.from(t).map(e=>{return t=e,n={base64:i},new Promise((e,i)=>{const a=new FileReader;a.onerror=()=>{i(new Error("Failed to read the selected media because the operation failed."))},a.onload=({target:i})=>{const a=i.result,s=()=>e({uri:a,width:0,height:0}),r=i=>{e(Object.assign({},i,n.base64&&{base64:a.substr(a.indexOf(",")+1)},{file:t}))};if("string"===typeof a)if(t.type.startsWith("image/")){const e=new Image;e.src=a,e.onload=()=>{r({uri:a,width:e.naturalWidth??e.width,height:e.naturalHeight??e.height,type:"image",mimeType:t.type,fileName:t.name,fileSize:t.size})},e.onerror=()=>s()}else if(t.type.startsWith("video/")){const e=document.createElement("video");e.preload="metadata",e.src=a,e.onloadedmetadata=()=>{r({uri:a,width:e.videoWidth,height:e.videoHeight,type:"video",mimeType:t.type,fileName:t.name,fileSize:t.size,duration:e.duration})},e.onerror=()=>s()}else s();else s()},a.readAsDataURL(t)});var t,n}));e({canceled:!1,assets:a})}else e({canceled:!0,assets:null});document.body.removeChild(s)}),s.addEventListener("cancel",()=>{s.dispatchEvent(new Event("change"))});const t=new MouseEvent("click");s.dispatchEvent(t)})}async function T(){return P.getCameraPermissionsAsync()}async function x(e=!1){return P.getMediaLibraryPermissionsAsync(e)}async function L(){return P.requestCameraPermissionsAsync()}async function R(e=!1){return(0,P.requestMediaLibraryPermissionsAsync)(e)}const _=o({getMethod:e=>x(e?.writeOnly),requestMethod:e=>R(e?.writeOnly)}),k=o({getMethod:T,requestMethod:L});async function O(){return P.getPendingResultAsync?P.getPendingResultAsync():null}async function S(e={}){if(!P.launchCameraAsync)throw new c("ImagePicker","launchCameraAsync");const t=E(e);return await P.launchCameraAsync(function(e){const{aspect:t,quality:n,videoMaxDuration:a}=e;if(null!=t){const[e,n]=t;if(e<=0||n<=0)throw new i("ERR_INVALID_ARGUMENT",`Invalid aspect ratio values ${e}:${n}. Provide positive numbers.`)}if(n&&(n<0||n>1))throw new i("ERR_INVALID_ARGUMENT",`Invalid 'quality' value ${n}. Provide a value between 0 and 1.`);if(a&&a<0)throw new i("ERR_INVALID_ARGUMENT",`Invalid 'videoMaxDuration' value ${a}. Provide a non-negative number.`);return e}(t))}async function H(e={}){const t=E(e);if(!P.launchImageLibraryAsync)throw new c("ImagePicker","launchImageLibraryAsync");return t?.allowsEditing&&t.allowsMultipleSelection&&console.warn("[expo-image-picker] `allowsEditing` is not supported when `allowsMultipleSelection` is enabled and will be ignored.Disable either 'allowsEditing' or 'allowsMultipleSelection' in 'launchImageLibraryAsync' to fix this warning."),await P.launchImageLibraryAsync(t)}},95991:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={OS:"web",select:e=>"web"in e?e.web:e.default,get isTesting(){return!1}}}}]);
//# sourceMappingURL=867.f5752b77.chunk.js.map