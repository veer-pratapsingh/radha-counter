{"ast":null,"code":"import XDate from'xdate';import React,{forwardRef,useImperativeHandle,useEffect,useRef,useState,useContext,useCallback}from'react';import Animated from\"react-native-web/dist/exports/Animated\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{getDefaultLocale}from'../../services';import{toMarkingFormat}from'../../interface';import{isToday,isPastDate}from'../../dateutils';import{UpdateSources,todayString}from'../commons';import styleConstructor from'../style';import Context from'./index';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TOP_POSITION=65;const DOWN_ICON=require('../../img/down.png');const UP_ICON=require('../../img/up.png');const TodayButton=(props,ref)=>{useImperativeHandle(ref,()=>({disable:shouldDisable=>{disable(shouldDisable);}}));const{margin=0,disabledOpacity=0.3,theme,style:propsStyle}=props;const{date,setDate}=useContext(Context);const[disabled,setDisabled]=useState(false);const style=useRef(styleConstructor(theme));const state=isToday(date)?0:isPastDate(date)?-1:1;const shouldShow=state!==0;useEffect(()=>{if(shouldShow){setButtonIcon(getButtonIcon());}animatePosition();},[state]);useEffect(()=>{if(!shouldShow){return;}animateOpacity();},[disabled]);const disable=shouldDisable=>{if(shouldDisable!==disabled){setDisabled(shouldDisable);}};const getFormattedLabel=()=>{const todayStr=getDefaultLocale().today||todayString;const today=todayStr.charAt(0).toUpperCase()+todayStr.slice(1);return today;};const today=useRef(getFormattedLabel());const getButtonIcon=()=>{if(shouldShow){return state===1?UP_ICON:DOWN_ICON;}};const[buttonIcon,setButtonIcon]=useState(getButtonIcon());const buttonY=useRef(new Animated.Value(margin?-margin:-TOP_POSITION));const opacity=useRef(new Animated.Value(1));const getPositionAnimation=()=>{const toValue=state===0?TOP_POSITION:-margin||-TOP_POSITION;return{toValue,tension:30,friction:8,useNativeDriver:true};};const getOpacityAnimation=()=>{return{toValue:disabled?disabledOpacity:1,duration:500,useNativeDriver:true};};const animatePosition=()=>{const animationData=getPositionAnimation();Animated.spring(buttonY.current,Object.assign({},animationData)).start();};const animateOpacity=()=>{const animationData=getOpacityAnimation();Animated.timing(opacity.current,Object.assign({},animationData)).start();};const getTodayDate=()=>{return toMarkingFormat(new XDate());};const onPress=useCallback(()=>{setDate(getTodayDate(),UpdateSources.TODAY_PRESS);},[setDate]);return _jsx(Animated.View,{style:[style.current.todayButtonContainer,{transform:[{translateY:buttonY.current}]}],children:_jsxs(TouchableOpacity,{style:[style.current.todayButton,propsStyle],onPress:onPress,disabled:disabled,children:[_jsx(Animated.Image,{style:[style.current.todayButtonImage,{opacity:opacity.current}],source:buttonIcon}),_jsx(Animated.Text,{allowFontScaling:false,style:[style.current.todayButtonText,{opacity:opacity.current}],children:today.current})]})});};export default forwardRef(TodayButton);","map":{"version":3,"names":["XDate","React","forwardRef","useImperativeHandle","useEffect","useRef","useState","useContext","useCallback","Animated","TouchableOpacity","getDefaultLocale","toMarkingFormat","isToday","isPastDate","UpdateSources","todayString","styleConstructor","Context","jsx","_jsx","jsxs","_jsxs","TOP_POSITION","DOWN_ICON","require","UP_ICON","TodayButton","props","ref","disable","shouldDisable","margin","disabledOpacity","theme","style","propsStyle","date","setDate","disabled","setDisabled","state","shouldShow","setButtonIcon","getButtonIcon","animatePosition","animateOpacity","getFormattedLabel","todayStr","today","charAt","toUpperCase","slice","buttonIcon","buttonY","Value","opacity","getPositionAnimation","toValue","tension","friction","useNativeDriver","getOpacityAnimation","duration","animationData","spring","current","Object","assign","start","timing","getTodayDate","onPress","TODAY_PRESS","View","todayButtonContainer","transform","translateY","children","todayButton","Image","todayButtonImage","source","Text","allowFontScaling","todayButtonText"],"sources":["C:/Users/chaud/radha-counter/node_modules/react-native-calendars/src/expandableCalendar/Context/todayButton.js"],"sourcesContent":["import XDate from 'xdate';\nimport React, { forwardRef, useImperativeHandle, useEffect, useRef, useState, useContext, useCallback } from 'react';\nimport { Animated, TouchableOpacity } from 'react-native';\nimport { getDefaultLocale } from '../../services';\nimport { toMarkingFormat } from '../../interface';\nimport { isToday, isPastDate } from '../../dateutils';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from './index';\nconst TOP_POSITION = 65;\nconst DOWN_ICON = require('../../img/down.png');\nconst UP_ICON = require('../../img/up.png');\nconst TodayButton = (props, ref) => {\n    useImperativeHandle(ref, () => ({\n        disable: (shouldDisable) => {\n            disable(shouldDisable);\n        }\n    }));\n    const { margin = 0, disabledOpacity = 0.3, theme, style: propsStyle } = props;\n    const { date, setDate } = useContext(Context);\n    const [disabled, setDisabled] = useState(false);\n    const style = useRef(styleConstructor(theme));\n    const state = isToday(date) ? 0 : isPastDate(date) ? -1 : 1;\n    const shouldShow = state !== 0;\n    /** Effects */\n    useEffect(() => {\n        if (shouldShow) {\n            setButtonIcon(getButtonIcon());\n        }\n        animatePosition();\n    }, [state]);\n    useEffect(() => {\n        if (!shouldShow) {\n            return;\n        }\n        animateOpacity();\n    }, [disabled]);\n    const disable = (shouldDisable) => {\n        if (shouldDisable !== disabled) {\n            setDisabled(shouldDisable);\n        }\n    };\n    /** Label */\n    const getFormattedLabel = () => {\n        const todayStr = getDefaultLocale().today || todayString;\n        const today = todayStr.charAt(0).toUpperCase() + todayStr.slice(1);\n        return today;\n    };\n    const today = useRef(getFormattedLabel());\n    /** Icon */\n    const getButtonIcon = () => {\n        if (shouldShow) {\n            return state === 1 ? UP_ICON : DOWN_ICON;\n        }\n    };\n    const [buttonIcon, setButtonIcon] = useState(getButtonIcon());\n    /** Animations */\n    const buttonY = useRef(new Animated.Value(margin ? -margin : -TOP_POSITION));\n    const opacity = useRef(new Animated.Value(1));\n    const getPositionAnimation = () => {\n        const toValue = state === 0 ? TOP_POSITION : -margin || -TOP_POSITION;\n        return {\n            toValue,\n            tension: 30,\n            friction: 8,\n            useNativeDriver: true\n        };\n    };\n    const getOpacityAnimation = () => {\n        return {\n            toValue: disabled ? disabledOpacity : 1,\n            duration: 500,\n            useNativeDriver: true\n        };\n    };\n    const animatePosition = () => {\n        const animationData = getPositionAnimation();\n        Animated.spring(buttonY.current, {\n            ...animationData\n        }).start();\n    };\n    const animateOpacity = () => {\n        const animationData = getOpacityAnimation();\n        Animated.timing(opacity.current, {\n            ...animationData\n        }).start();\n    };\n    const getTodayDate = () => {\n        return toMarkingFormat(new XDate());\n    };\n    const onPress = useCallback(() => {\n        setDate(getTodayDate(), UpdateSources.TODAY_PRESS);\n    }, [setDate]);\n    return (<Animated.View style={[style.current.todayButtonContainer, { transform: [{ translateY: buttonY.current }] }]}>\n      <TouchableOpacity style={[style.current.todayButton, propsStyle]} onPress={onPress} disabled={disabled}>\n        <Animated.Image style={[style.current.todayButtonImage, { opacity: opacity.current }]} source={buttonIcon}/>\n        <Animated.Text allowFontScaling={false} style={[style.current.todayButtonText, { opacity: opacity.current }]}>\n          {today.current}\n        </Animated.Text>\n      </TouchableOpacity>\n    </Animated.View>);\n};\nexport default forwardRef(TodayButton);\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}