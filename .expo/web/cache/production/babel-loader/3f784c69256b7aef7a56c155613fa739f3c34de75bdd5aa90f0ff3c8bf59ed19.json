{"ast":null,"code":"import inRange from'lodash/inRange';import debounce from'lodash/debounce';import noop from'lodash/noop';import React,{forwardRef,useCallback,useEffect,useMemo,useRef}from'react';import{DataProvider,LayoutProvider,RecyclerListView}from'recyclerlistview';import constants from'../commons/constants';import{useCombinedRefs}from'../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";const dataProviderMaker=items=>new DataProvider((item1,item2)=>item1!==item2).cloneWithRows(items);const InfiniteList=(props,ref)=>{const{isHorizontal,renderItem,data,reloadPages=noop,pageWidth=constants.screenWidth,pageHeight=constants.screenHeight,onPageChange,onReachEdge,onReachNearEdge,onReachNearEdgeThreshold,initialPageIndex=0,initialOffset,extendedState,scrollViewProps,positionIndex=0,disableScrollOnDataChange,onEndReachedThreshold,onVisibleIndicesChanged,layoutProvider,onScroll,onEndReached,renderFooter}=props;const dataProvider=useMemo(()=>{return dataProviderMaker(data);},[data]);const _layoutProvider=useRef(new LayoutProvider(()=>'page',(_type,dim)=>{dim.width=pageWidth;dim.height=pageHeight;}));const shouldFixRTL=useMemo(()=>{return isHorizontal&&constants.isRTL&&(constants.isRN73()||constants.isAndroid);},[isHorizontal]);const listRef=useCombinedRefs(ref);const pageIndex=useRef();const isOnEdge=useRef(false);const isNearEdge=useRef(false);const scrolledByUser=useRef(false);const reloadPagesDebounce=useCallback(debounce(reloadPages,500,{leading:false,trailing:true}),[reloadPages]);useEffect(()=>{if(disableScrollOnDataChange){return;}setTimeout(()=>{const x=isHorizontal?shouldFixRTL?Math.floor(data.length/2)+1:Math.floor(data.length/2)*pageWidth:0;const y=isHorizontal?0:positionIndex*pageHeight;listRef.current?.scrollToOffset?.(x,y,false);},0);},[data,disableScrollOnDataChange,isHorizontal]);const _onScroll=useCallback((event,offsetX,offsetY)=>{reloadPagesDebounce?.cancel();const contentOffset=event.nativeEvent.contentOffset;const y=contentOffset.y;const x=shouldFixRTL?pageWidth*data.length-contentOffset.x:contentOffset.x;const newPageIndex=Math.round(isHorizontal?x/pageWidth:y/pageHeight);if(pageIndex.current!==newPageIndex){if(pageIndex.current!==undefined){onPageChange?.(newPageIndex,pageIndex.current,{scrolledByUser:scrolledByUser.current});scrolledByUser.current=false;isOnEdge.current=false;isNearEdge.current=false;if(newPageIndex===0||newPageIndex===data.length-1){isOnEdge.current=true;}else if(onReachNearEdgeThreshold&&!inRange(newPageIndex,onReachNearEdgeThreshold,data.length-onReachNearEdgeThreshold)){isNearEdge.current=true;}}if(isHorizontal&&constants.isAndroid){setTimeout(()=>{onMomentumScrollEnd(event);},100);}pageIndex.current=newPageIndex;}onScroll?.(event,offsetX,offsetY);},[onScroll,onPageChange,data.length,reloadPagesDebounce,isHorizontal,shouldFixRTL]);const onMomentumScrollEnd=useCallback(event=>{if(pageIndex.current){if(isOnEdge.current){onReachEdge?.(pageIndex.current);reloadPagesDebounce?.(pageIndex.current);}else if(isNearEdge.current){reloadPagesDebounce?.(pageIndex.current);onReachNearEdge?.(pageIndex.current);}scrollViewProps?.onMomentumScrollEnd?.(event);}},[scrollViewProps?.onMomentumScrollEnd,onReachEdge,onReachNearEdge,reloadPagesDebounce]);const onScrollBeginDrag=useCallback(()=>{scrolledByUser.current=true;},[]);const scrollViewPropsMemo=useMemo(()=>{return Object.assign({pagingEnabled:isHorizontal,bounces:false},scrollViewProps,{onScrollBeginDrag,onMomentumScrollEnd});},[onScrollBeginDrag,onMomentumScrollEnd,scrollViewProps,isHorizontal]);const style=useMemo(()=>{return{height:pageHeight};},[pageHeight]);return _jsx(RecyclerListView,{ref:listRef,isHorizontal:isHorizontal,rowRenderer:renderItem,dataProvider:dataProvider,layoutProvider:layoutProvider??_layoutProvider.current,extendedState:extendedState,initialRenderIndex:initialOffset?undefined:initialPageIndex,initialOffset:initialOffset,renderAheadOffset:5*pageWidth,onScroll:_onScroll,style:style,scrollViewProps:scrollViewPropsMemo,onEndReached:onEndReached,onEndReachedThreshold:onEndReachedThreshold,onVisibleIndicesChanged:onVisibleIndicesChanged,renderFooter:renderFooter});};export default forwardRef(InfiniteList);","map":{"version":3,"names":["inRange","debounce","noop","React","forwardRef","useCallback","useEffect","useMemo","useRef","DataProvider","LayoutProvider","RecyclerListView","constants","useCombinedRefs","jsx","_jsx","dataProviderMaker","items","item1","item2","cloneWithRows","InfiniteList","props","ref","isHorizontal","renderItem","data","reloadPages","pageWidth","screenWidth","pageHeight","screenHeight","onPageChange","onReachEdge","onReachNearEdge","onReachNearEdgeThreshold","initialPageIndex","initialOffset","extendedState","scrollViewProps","positionIndex","disableScrollOnDataChange","onEndReachedThreshold","onVisibleIndicesChanged","layoutProvider","onScroll","onEndReached","renderFooter","dataProvider","_layoutProvider","_type","dim","width","height","shouldFixRTL","isRTL","isRN73","isAndroid","listRef","pageIndex","isOnEdge","isNearEdge","scrolledByUser","reloadPagesDebounce","leading","trailing","setTimeout","x","Math","floor","length","y","current","scrollToOffset","_onScroll","event","offsetX","offsetY","cancel","contentOffset","nativeEvent","newPageIndex","round","undefined","onMomentumScrollEnd","onScrollBeginDrag","scrollViewPropsMemo","Object","assign","pagingEnabled","bounces","style","rowRenderer","initialRenderIndex","renderAheadOffset"],"sources":["C:/Users/chaud/radha-counter/node_modules/react-native-calendars/src/infinite-list/index.js"],"sourcesContent":["import inRange from 'lodash/inRange';\nimport debounce from 'lodash/debounce';\nimport noop from 'lodash/noop';\nimport React, { forwardRef, useCallback, useEffect, useMemo, useRef } from 'react';\nimport { DataProvider, LayoutProvider, RecyclerListView } from 'recyclerlistview';\nimport constants from '../commons/constants';\nimport { useCombinedRefs } from '../hooks';\nconst dataProviderMaker = (items) => new DataProvider((item1, item2) => item1 !== item2).cloneWithRows(items);\nconst InfiniteList = (props, ref) => {\n    const { isHorizontal, renderItem, data, reloadPages = noop, pageWidth = constants.screenWidth, pageHeight = constants.screenHeight, onPageChange, onReachEdge, onReachNearEdge, onReachNearEdgeThreshold, initialPageIndex = 0, initialOffset, extendedState, scrollViewProps, positionIndex = 0, disableScrollOnDataChange, onEndReachedThreshold, onVisibleIndicesChanged, layoutProvider, onScroll, onEndReached, renderFooter } = props;\n    const dataProvider = useMemo(() => {\n        return dataProviderMaker(data);\n    }, [data]);\n    const _layoutProvider = useRef(new LayoutProvider(() => 'page', (_type, dim) => {\n        dim.width = pageWidth;\n        dim.height = pageHeight;\n    }));\n    const shouldFixRTL = useMemo(() => {\n        return isHorizontal && constants.isRTL && (constants.isRN73() || constants.isAndroid);\n    }, [isHorizontal]);\n    const listRef = useCombinedRefs(ref);\n    const pageIndex = useRef();\n    const isOnEdge = useRef(false);\n    const isNearEdge = useRef(false);\n    const scrolledByUser = useRef(false);\n    const reloadPagesDebounce = useCallback(debounce(reloadPages, 500, { leading: false, trailing: true }), [reloadPages]);\n    useEffect(() => {\n        if (disableScrollOnDataChange) {\n            return;\n        }\n        setTimeout(() => {\n            const x = isHorizontal ? shouldFixRTL ? Math.floor(data.length / 2) + 1 : Math.floor(data.length / 2) * pageWidth : 0;\n            const y = isHorizontal ? 0 : positionIndex * pageHeight;\n            // @ts-expect-error\n            listRef.current?.scrollToOffset?.(x, y, false);\n        }, 0);\n    }, [data, disableScrollOnDataChange, isHorizontal]);\n    const _onScroll = useCallback((event, offsetX, offsetY) => {\n        reloadPagesDebounce?.cancel();\n        const contentOffset = event.nativeEvent.contentOffset;\n        const y = contentOffset.y;\n        const x = shouldFixRTL ? (pageWidth * data.length - contentOffset.x) : contentOffset.x;\n        const newPageIndex = Math.round(isHorizontal ? x / pageWidth : y / pageHeight);\n        if (pageIndex.current !== newPageIndex) {\n            if (pageIndex.current !== undefined) {\n                onPageChange?.(newPageIndex, pageIndex.current, { scrolledByUser: scrolledByUser.current });\n                scrolledByUser.current = false;\n                isOnEdge.current = false;\n                isNearEdge.current = false;\n                if (newPageIndex === 0 || newPageIndex === data.length - 1) {\n                    isOnEdge.current = true;\n                }\n                else if (onReachNearEdgeThreshold &&\n                    !inRange(newPageIndex, onReachNearEdgeThreshold, data.length - onReachNearEdgeThreshold)) {\n                    isNearEdge.current = true;\n                }\n            }\n            if (isHorizontal && constants.isAndroid) {\n                // NOTE: this is done only to handle 'onMomentumScrollEnd' not being called on Android\n                setTimeout(() => {\n                    onMomentumScrollEnd(event);\n                }, 100);\n            }\n            pageIndex.current = newPageIndex;\n        }\n        onScroll?.(event, offsetX, offsetY);\n    }, [onScroll, onPageChange, data.length, reloadPagesDebounce, isHorizontal, shouldFixRTL]);\n    const onMomentumScrollEnd = useCallback(event => {\n        if (pageIndex.current) {\n            if (isOnEdge.current) {\n                onReachEdge?.(pageIndex.current);\n                reloadPagesDebounce?.(pageIndex.current);\n            }\n            else if (isNearEdge.current) {\n                reloadPagesDebounce?.(pageIndex.current);\n                onReachNearEdge?.(pageIndex.current);\n            }\n            scrollViewProps?.onMomentumScrollEnd?.(event);\n        }\n    }, [scrollViewProps?.onMomentumScrollEnd, onReachEdge, onReachNearEdge, reloadPagesDebounce]);\n    const onScrollBeginDrag = useCallback(() => {\n        scrolledByUser.current = true;\n    }, []);\n    const scrollViewPropsMemo = useMemo(() => {\n        return {\n            pagingEnabled: isHorizontal,\n            bounces: false,\n            ...scrollViewProps,\n            onScrollBeginDrag,\n            onMomentumScrollEnd\n        };\n    }, [onScrollBeginDrag, onMomentumScrollEnd, scrollViewProps, isHorizontal]);\n    const style = useMemo(() => {\n        return { height: pageHeight };\n    }, [pageHeight]);\n    return (<RecyclerListView \n    // @ts-expect-error\n    ref={listRef} isHorizontal={isHorizontal} rowRenderer={renderItem} dataProvider={dataProvider} layoutProvider={layoutProvider ?? _layoutProvider.current} extendedState={extendedState} initialRenderIndex={initialOffset ? undefined : initialPageIndex} initialOffset={initialOffset} renderAheadOffset={5 * pageWidth} onScroll={_onScroll} style={style} scrollViewProps={scrollViewPropsMemo} onEndReached={onEndReached} onEndReachedThreshold={onEndReachedThreshold} onVisibleIndicesChanged={onVisibleIndicesChanged} renderFooter={renderFooter}/>);\n};\nexport default forwardRef(InfiniteList);\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}