{"ast":null,"code":"import _objectDestructuringEmpty from\"@babel/runtime/helpers/objectDestructuringEmpty\";import _objectWithoutPropertiesLoose from\"@babel/runtime/helpers/objectWithoutPropertiesLoose\";const _excluded=[\"allowShadow\"];import React,{useCallback,useContext,useEffect,useMemo,useRef,useState,createElement as _createElement}from'react';import View from\"react-native-web/dist/exports/View\";import XDate from'xdate';import InfiniteList from'../../infinite-list';import Week from'../week';import WeekDaysNames from'../../commons/WeekDaysNames';import CalendarContext from'../../expandableCalendar/Context';import styleConstructor from'../style';import{toMarkingFormat}from'../../interface';import{extractCalendarProps}from'../../componentUpdater';import constants from'../../commons/constants';import{UpdateSources}from'../commons';import{sameWeek}from'../../dateutils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NUMBER_OF_PAGES=50;const DEFAULT_PAGE_HEIGHT=48;const WeekCalendar=props=>{const{current,firstDay=0,markedDates,allowShadow=true,hideDayNames,theme,calendarWidth,calendarHeight=DEFAULT_PAGE_HEIGHT,testID}=props;const context=useContext(CalendarContext);const{date,updateSource}=context;const style=useRef(styleConstructor(theme));const list=useRef();const[items,setItems]=useState(getDatesArray(current||date,firstDay,NUMBER_OF_PAGES));const extraData={current,date:context.date,firstDay};const containerWidth=calendarWidth||constants.screenWidth;const weekStyle=useMemo(()=>{return[{width:containerWidth},props.style];},[containerWidth,props.style]);useEffect(()=>{if(updateSource!==UpdateSources.WEEK_SCROLL){const pageIndex=items.findIndex(item=>sameWeek(item,date,firstDay));list.current?.scrollToOffset?.(pageIndex*containerWidth,0,false);}},[date]);const onDayPress=useCallback(dateData=>{context.setDate?.(dateData.dateString,UpdateSources.DAY_PRESS);props.onDayPress?.(dateData);},[props.onDayPress]);const onPageChange=useCallback((pageIndex,_prevPage,{scrolledByUser})=>{if(scrolledByUser){context?.setDate(items[pageIndex],UpdateSources.WEEK_SCROLL);}},[items]);const reloadPages=useCallback(pageIndex=>{const date=items[pageIndex];setItems(getDatesArray(date,firstDay,NUMBER_OF_PAGES));},[items]);const renderItem=useCallback((_type,item)=>{const calendarListProps=_objectWithoutPropertiesLoose(props,_excluded);const _extractCalendarProps=extractCalendarProps(calendarListProps),others=Object.assign({},(_objectDestructuringEmpty(_extractCalendarProps),_extractCalendarProps));const isSameWeek=sameWeek(item,date,firstDay);return _createElement(Week,Object.assign({},others,{key:item,current:isSameWeek?date:item,firstDay:firstDay,style:weekStyle,markedDates:markedDates,onDayPress:onDayPress,context:context}));},[date,markedDates]);return _jsxs(View,{testID:testID,style:[allowShadow&&style.current.containerShadow,!hideDayNames&&style.current.containerWrapper],children:[!hideDayNames&&_jsx(View,{style:[style.current.week,style.current.weekCalendar],children:_jsx(WeekDaysNames,{firstDay:firstDay,style:style.current.dayHeader})}),_jsx(View,{children:_jsx(InfiniteList,{isHorizontal:true,ref:list,data:items,renderItem:renderItem,reloadPages:reloadPages,onReachNearEdgeThreshold:Math.round(NUMBER_OF_PAGES*0.4),extendedState:extraData,style:style.current.container,initialPageIndex:NUMBER_OF_PAGES,pageHeight:calendarHeight,pageWidth:containerWidth,onPageChange:onPageChange,scrollViewProps:{showsHorizontalScrollIndicator:false}},\"week-list\")})]});};export default WeekCalendar;function getDate(date,firstDay,weekIndex){const d=new XDate(date);let dayOfTheWeek=d.getDay();if(dayOfTheWeek<firstDay&&firstDay>0){dayOfTheWeek=7+dayOfTheWeek;}const dd=weekIndex===0?d:d.addDays(firstDay-dayOfTheWeek);const newDate=dd.addWeeks(weekIndex);return toMarkingFormat(newDate);}function getDatesArray(date,firstDay,numberOfPages=NUMBER_OF_PAGES){const array=[];for(let index=-numberOfPages;index<=numberOfPages;index++){const d=getDate(date,firstDay,index);array.push(d);}return array;}","map":{"version":3,"names":["React","useCallback","useContext","useEffect","useMemo","useRef","useState","createElement","_createElement","View","XDate","InfiniteList","Week","WeekDaysNames","CalendarContext","styleConstructor","toMarkingFormat","extractCalendarProps","constants","UpdateSources","sameWeek","jsx","_jsx","jsxs","_jsxs","NUMBER_OF_PAGES","DEFAULT_PAGE_HEIGHT","WeekCalendar","props","current","firstDay","markedDates","allowShadow","hideDayNames","theme","calendarWidth","calendarHeight","testID","context","date","updateSource","style","list","items","setItems","getDatesArray","extraData","containerWidth","screenWidth","weekStyle","width","WEEK_SCROLL","pageIndex","findIndex","item","scrollToOffset","onDayPress","dateData","setDate","dateString","DAY_PRESS","onPageChange","_prevPage","scrolledByUser","reloadPages","renderItem","_type","calendarListProps","_objectWithoutPropertiesLoose","_excluded","_extractCalendarProps","others","Object","assign","_objectDestructuringEmpty","isSameWeek","key","containerShadow","containerWrapper","children","week","weekCalendar","dayHeader","isHorizontal","ref","data","onReachNearEdgeThreshold","Math","round","extendedState","container","initialPageIndex","pageHeight","pageWidth","scrollViewProps","showsHorizontalScrollIndicator","getDate","weekIndex","d","dayOfTheWeek","getDay","dd","addDays","newDate","addWeeks","numberOfPages","array","index","push"],"sources":["C:/Users/chaud/radha-counter/node_modules/react-native-calendars/src/expandableCalendar/WeekCalendar/new.js"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { View } from 'react-native';\nimport XDate from 'xdate';\nimport InfiniteList from '../../infinite-list';\nimport Week from '../week';\nimport WeekDaysNames from '../../commons/WeekDaysNames';\nimport CalendarContext from '../../expandableCalendar/Context';\nimport styleConstructor from '../style';\nimport { toMarkingFormat } from '../../interface';\nimport { extractCalendarProps } from '../../componentUpdater';\nimport constants from '../../commons/constants';\nimport { UpdateSources } from '../commons';\nimport { sameWeek } from '../../dateutils';\nconst NUMBER_OF_PAGES = 50;\nconst DEFAULT_PAGE_HEIGHT = 48;\nconst WeekCalendar = (props) => {\n    const { current, firstDay = 0, markedDates, allowShadow = true, hideDayNames, theme, calendarWidth, calendarHeight = DEFAULT_PAGE_HEIGHT, testID } = props;\n    const context = useContext(CalendarContext);\n    const { date, updateSource } = context;\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const [items, setItems] = useState(getDatesArray(current || date, firstDay, NUMBER_OF_PAGES));\n    const extraData = {\n        current,\n        date: context.date,\n        firstDay\n    };\n    const containerWidth = calendarWidth || constants.screenWidth;\n    const weekStyle = useMemo(() => {\n        return [{ width: containerWidth }, props.style];\n    }, [containerWidth, props.style]);\n    useEffect(() => {\n        if (updateSource !== UpdateSources.WEEK_SCROLL) {\n            const pageIndex = items.findIndex(item => sameWeek(item, date, firstDay));\n            // @ts-expect-error\n            list.current?.scrollToOffset?.(pageIndex * containerWidth, 0, false);\n        }\n    }, [date]);\n    const onDayPress = useCallback((dateData) => {\n        context.setDate?.(dateData.dateString, UpdateSources.DAY_PRESS);\n        props.onDayPress?.(dateData);\n    }, [props.onDayPress]);\n    const onPageChange = useCallback((pageIndex, _prevPage, { scrolledByUser }) => {\n        if (scrolledByUser) {\n            context?.setDate(items[pageIndex], UpdateSources.WEEK_SCROLL);\n        }\n    }, [items]);\n    const reloadPages = useCallback(pageIndex => {\n        const date = items[pageIndex];\n        setItems(getDatesArray(date, firstDay, NUMBER_OF_PAGES));\n    }, [items]);\n    const renderItem = useCallback((_type, item) => {\n        const { allowShadow, ...calendarListProps } = props;\n        const { /* style,  */ ...others } = extractCalendarProps(calendarListProps);\n        const isSameWeek = sameWeek(item, date, firstDay);\n        return (<Week {...others} key={item} current={isSameWeek ? date : item} firstDay={firstDay} style={weekStyle} markedDates={markedDates} onDayPress={onDayPress} context={context}/>);\n    }, [date, markedDates]);\n    return (<View testID={testID} style={[allowShadow && style.current.containerShadow, !hideDayNames && style.current.containerWrapper]}>\n      {!hideDayNames && (<View style={[style.current.week, style.current.weekCalendar]}>\n          <WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>\n        </View>)}\n      <View>\n        <InfiniteList key=\"week-list\" isHorizontal ref={list} data={items} renderItem={renderItem} reloadPages={reloadPages} onReachNearEdgeThreshold={Math.round(NUMBER_OF_PAGES * 0.4)} extendedState={extraData} style={style.current.container} initialPageIndex={NUMBER_OF_PAGES} pageHeight={calendarHeight} pageWidth={containerWidth} onPageChange={onPageChange} scrollViewProps={{\n            showsHorizontalScrollIndicator: false\n        }}/>\n      </View>\n    </View>);\n};\nexport default WeekCalendar;\n// function getDate({current, context, firstDay = 0}: WeekCalendarProps, weekIndex: number) {\nfunction getDate(date, firstDay, weekIndex) {\n    // const d = new XDate(current || context.date);\n    const d = new XDate(date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n    // leave the current date in the visible week as is\n    const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n    const newDate = dd.addWeeks(weekIndex);\n    return toMarkingFormat(newDate);\n}\n// function getDatesArray(args: WeekCalendarProps, numberOfPages = NUMBER_OF_PAGES) => {\nfunction getDatesArray(date, firstDay, numberOfPages = NUMBER_OF_PAGES) {\n    const array = [];\n    for (let index = -numberOfPages; index <= numberOfPages; index++) {\n        const d = getDate(date, firstDay, index);\n        array.push(d);\n    }\n    return array;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}