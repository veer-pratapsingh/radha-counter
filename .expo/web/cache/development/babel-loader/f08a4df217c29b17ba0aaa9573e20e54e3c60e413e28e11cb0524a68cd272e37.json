{"ast":null,"code":"import _objectDestructuringEmpty from \"@babel/runtime/helpers/objectDestructuringEmpty\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nconst _excluded = [\"allowShadow\"];\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, createElement as _createElement } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport XDate from 'xdate';\nimport InfiniteList from '../../infinite-list';\nimport Week from '../week';\nimport WeekDaysNames from '../../commons/WeekDaysNames';\nimport CalendarContext from '../../expandableCalendar/Context';\nimport styleConstructor from '../style';\nimport { toMarkingFormat } from '../../interface';\nimport { extractCalendarProps } from '../../componentUpdater';\nimport constants from '../../commons/constants';\nimport { UpdateSources } from '../commons';\nimport { sameWeek } from '../../dateutils';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nconst NUMBER_OF_PAGES = 50;\nconst DEFAULT_PAGE_HEIGHT = 48;\nconst WeekCalendar = props => {\n  const {\n    current,\n    firstDay = 0,\n    markedDates,\n    allowShadow = true,\n    hideDayNames,\n    theme,\n    calendarWidth,\n    calendarHeight = DEFAULT_PAGE_HEIGHT,\n    testID\n  } = props;\n  const context = useContext(CalendarContext);\n  const {\n    date,\n    updateSource\n  } = context;\n  const style = useRef(styleConstructor(theme));\n  const list = useRef();\n  const [items, setItems] = useState(getDatesArray(current || date, firstDay, NUMBER_OF_PAGES));\n  const extraData = {\n    current,\n    date: context.date,\n    firstDay\n  };\n  const containerWidth = calendarWidth || constants.screenWidth;\n  const weekStyle = useMemo(() => {\n    return [{\n      width: containerWidth\n    }, props.style];\n  }, [containerWidth, props.style]);\n  useEffect(() => {\n    if (updateSource !== UpdateSources.WEEK_SCROLL) {\n      const pageIndex = items.findIndex(item => sameWeek(item, date, firstDay));\n      list.current?.scrollToOffset?.(pageIndex * containerWidth, 0, false);\n    }\n  }, [date]);\n  const onDayPress = useCallback(dateData => {\n    context.setDate?.(dateData.dateString, UpdateSources.DAY_PRESS);\n    props.onDayPress?.(dateData);\n  }, [props.onDayPress]);\n  const onPageChange = useCallback((pageIndex, _prevPage, {\n    scrolledByUser\n  }) => {\n    if (scrolledByUser) {\n      context?.setDate(items[pageIndex], UpdateSources.WEEK_SCROLL);\n    }\n  }, [items]);\n  const reloadPages = useCallback(pageIndex => {\n    const date = items[pageIndex];\n    setItems(getDatesArray(date, firstDay, NUMBER_OF_PAGES));\n  }, [items]);\n  const renderItem = useCallback((_type, item) => {\n    const calendarListProps = _objectWithoutPropertiesLoose(props, _excluded);\n    const _extractCalendarProps = extractCalendarProps(calendarListProps),\n      others = Object.assign({}, (_objectDestructuringEmpty(_extractCalendarProps), _extractCalendarProps));\n    const isSameWeek = sameWeek(item, date, firstDay);\n    return _createElement(Week, Object.assign({}, others, {\n      key: item,\n      current: isSameWeek ? date : item,\n      firstDay: firstDay,\n      style: weekStyle,\n      markedDates: markedDates,\n      onDayPress: onDayPress,\n      context: context\n    }));\n  }, [date, markedDates]);\n  return _jsxs(View, {\n    testID: testID,\n    style: [allowShadow && style.current.containerShadow, !hideDayNames && style.current.containerWrapper],\n    children: [!hideDayNames && _jsx(View, {\n      style: [style.current.week, style.current.weekCalendar],\n      children: _jsx(WeekDaysNames, {\n        firstDay: firstDay,\n        style: style.current.dayHeader\n      })\n    }), _jsx(View, {\n      children: _jsx(InfiniteList, {\n        isHorizontal: true,\n        ref: list,\n        data: items,\n        renderItem: renderItem,\n        reloadPages: reloadPages,\n        onReachNearEdgeThreshold: Math.round(NUMBER_OF_PAGES * 0.4),\n        extendedState: extraData,\n        style: style.current.container,\n        initialPageIndex: NUMBER_OF_PAGES,\n        pageHeight: calendarHeight,\n        pageWidth: containerWidth,\n        onPageChange: onPageChange,\n        scrollViewProps: {\n          showsHorizontalScrollIndicator: false\n        }\n      }, \"week-list\")\n    })]\n  });\n};\nexport default WeekCalendar;\nfunction getDate(date, firstDay, weekIndex) {\n  const d = new XDate(date);\n  let dayOfTheWeek = d.getDay();\n  if (dayOfTheWeek < firstDay && firstDay > 0) {\n    dayOfTheWeek = 7 + dayOfTheWeek;\n  }\n  const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n  const newDate = dd.addWeeks(weekIndex);\n  return toMarkingFormat(newDate);\n}\nfunction getDatesArray(date, firstDay, numberOfPages = NUMBER_OF_PAGES) {\n  const array = [];\n  for (let index = -numberOfPages; index <= numberOfPages; index++) {\n    const d = getDate(date, firstDay, index);\n    array.push(d);\n  }\n  return array;\n}","map":{"version":3,"names":["React","useCallback","useContext","useEffect","useMemo","useRef","useState","createElement","_createElement","View","XDate","InfiniteList","Week","WeekDaysNames","CalendarContext","styleConstructor","toMarkingFormat","extractCalendarProps","constants","UpdateSources","sameWeek","jsx","_jsx","jsxs","_jsxs","NUMBER_OF_PAGES","DEFAULT_PAGE_HEIGHT","WeekCalendar","props","current","firstDay","markedDates","allowShadow","hideDayNames","theme","calendarWidth","calendarHeight","testID","context","date","updateSource","style","list","items","setItems","getDatesArray","extraData","containerWidth","screenWidth","weekStyle","width","WEEK_SCROLL","pageIndex","findIndex","item","scrollToOffset","onDayPress","dateData","setDate","dateString","DAY_PRESS","onPageChange","_prevPage","scrolledByUser","reloadPages","renderItem","_type","calendarListProps","_objectWithoutPropertiesLoose","_excluded","_extractCalendarProps","others","Object","assign","_objectDestructuringEmpty","isSameWeek","key","containerShadow","containerWrapper","children","week","weekCalendar","dayHeader","isHorizontal","ref","data","onReachNearEdgeThreshold","Math","round","extendedState","container","initialPageIndex","pageHeight","pageWidth","scrollViewProps","showsHorizontalScrollIndicator","getDate","weekIndex","d","dayOfTheWeek","getDay","dd","addDays","newDate","addWeeks","numberOfPages","array","index","push"],"sources":["C:/Users/chaud/radha-counter/node_modules/react-native-calendars/src/expandableCalendar/WeekCalendar/new.js"],"sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { View } from 'react-native';\nimport XDate from 'xdate';\nimport InfiniteList from '../../infinite-list';\nimport Week from '../week';\nimport WeekDaysNames from '../../commons/WeekDaysNames';\nimport CalendarContext from '../../expandableCalendar/Context';\nimport styleConstructor from '../style';\nimport { toMarkingFormat } from '../../interface';\nimport { extractCalendarProps } from '../../componentUpdater';\nimport constants from '../../commons/constants';\nimport { UpdateSources } from '../commons';\nimport { sameWeek } from '../../dateutils';\nconst NUMBER_OF_PAGES = 50;\nconst DEFAULT_PAGE_HEIGHT = 48;\nconst WeekCalendar = (props) => {\n    const { current, firstDay = 0, markedDates, allowShadow = true, hideDayNames, theme, calendarWidth, calendarHeight = DEFAULT_PAGE_HEIGHT, testID } = props;\n    const context = useContext(CalendarContext);\n    const { date, updateSource } = context;\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const [items, setItems] = useState(getDatesArray(current || date, firstDay, NUMBER_OF_PAGES));\n    const extraData = {\n        current,\n        date: context.date,\n        firstDay\n    };\n    const containerWidth = calendarWidth || constants.screenWidth;\n    const weekStyle = useMemo(() => {\n        return [{ width: containerWidth }, props.style];\n    }, [containerWidth, props.style]);\n    useEffect(() => {\n        if (updateSource !== UpdateSources.WEEK_SCROLL) {\n            const pageIndex = items.findIndex(item => sameWeek(item, date, firstDay));\n            // @ts-expect-error\n            list.current?.scrollToOffset?.(pageIndex * containerWidth, 0, false);\n        }\n    }, [date]);\n    const onDayPress = useCallback((dateData) => {\n        context.setDate?.(dateData.dateString, UpdateSources.DAY_PRESS);\n        props.onDayPress?.(dateData);\n    }, [props.onDayPress]);\n    const onPageChange = useCallback((pageIndex, _prevPage, { scrolledByUser }) => {\n        if (scrolledByUser) {\n            context?.setDate(items[pageIndex], UpdateSources.WEEK_SCROLL);\n        }\n    }, [items]);\n    const reloadPages = useCallback(pageIndex => {\n        const date = items[pageIndex];\n        setItems(getDatesArray(date, firstDay, NUMBER_OF_PAGES));\n    }, [items]);\n    const renderItem = useCallback((_type, item) => {\n        const { allowShadow, ...calendarListProps } = props;\n        const { /* style,  */ ...others } = extractCalendarProps(calendarListProps);\n        const isSameWeek = sameWeek(item, date, firstDay);\n        return (<Week {...others} key={item} current={isSameWeek ? date : item} firstDay={firstDay} style={weekStyle} markedDates={markedDates} onDayPress={onDayPress} context={context}/>);\n    }, [date, markedDates]);\n    return (<View testID={testID} style={[allowShadow && style.current.containerShadow, !hideDayNames && style.current.containerWrapper]}>\n      {!hideDayNames && (<View style={[style.current.week, style.current.weekCalendar]}>\n          <WeekDaysNames firstDay={firstDay} style={style.current.dayHeader}/>\n        </View>)}\n      <View>\n        <InfiniteList key=\"week-list\" isHorizontal ref={list} data={items} renderItem={renderItem} reloadPages={reloadPages} onReachNearEdgeThreshold={Math.round(NUMBER_OF_PAGES * 0.4)} extendedState={extraData} style={style.current.container} initialPageIndex={NUMBER_OF_PAGES} pageHeight={calendarHeight} pageWidth={containerWidth} onPageChange={onPageChange} scrollViewProps={{\n            showsHorizontalScrollIndicator: false\n        }}/>\n      </View>\n    </View>);\n};\nexport default WeekCalendar;\n// function getDate({current, context, firstDay = 0}: WeekCalendarProps, weekIndex: number) {\nfunction getDate(date, firstDay, weekIndex) {\n    // const d = new XDate(current || context.date);\n    const d = new XDate(date);\n    // get the first day of the week as date (for the on scroll mark)\n    let dayOfTheWeek = d.getDay();\n    if (dayOfTheWeek < firstDay && firstDay > 0) {\n        dayOfTheWeek = 7 + dayOfTheWeek;\n    }\n    // leave the current date in the visible week as is\n    const dd = weekIndex === 0 ? d : d.addDays(firstDay - dayOfTheWeek);\n    const newDate = dd.addWeeks(weekIndex);\n    return toMarkingFormat(newDate);\n}\n// function getDatesArray(args: WeekCalendarProps, numberOfPages = NUMBER_OF_PAGES) => {\nfunction getDatesArray(date, firstDay, numberOfPages = NUMBER_OF_PAGES) {\n    const array = [];\n    for (let index = -numberOfPages; index <= numberOfPages; index++) {\n        const d = getDate(date, firstDay, index);\n        array.push(d);\n    }\n    return array;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}