{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\nconst _excluded = [\"theme\", \"sections\", \"scrollToNextEvent\", \"avoidDateUpdates\", \"onScroll\", \"renderSectionHeader\", \"sectionStyle\", \"dayFormatter\", \"dayFormat\", \"useMoment\", \"markToday\", \"infiniteListProps\", \"renderItem\", \"onEndReached\", \"onEndReachedThreshold\"];\nvar _jsxFileName = \"C:\\\\Users\\\\chaud\\\\radha-counter\\\\node_modules\\\\react-native-calendars\\\\src\\\\expandableCalendar\\\\AgendaList\\\\infiniteAgendaList.js\";\nimport PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../../hooks';\nimport { getMoment } from '../../momentResolver';\nimport { isGTE, isToday } from '../../dateutils';\nimport { getDefaultLocale } from '../../services';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from '../Context';\nimport constants from '../../commons/constants';\nimport { parseDate } from '../../interface';\nimport { LayoutProvider } from 'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';\nimport { AgendaSectionHeader } from './commons';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst InfiniteAgendaList = _ref => {\n  let {\n      theme,\n      sections,\n      scrollToNextEvent,\n      avoidDateUpdates,\n      onScroll,\n      renderSectionHeader,\n      sectionStyle,\n      dayFormatter,\n      dayFormat = 'dddd, MMM d',\n      useMoment,\n      markToday = true,\n      infiniteListProps,\n      renderItem,\n      onEndReached,\n      onEndReachedThreshold\n    } = _ref,\n    others = _objectWithoutPropertiesLoose(_ref, _excluded);\n  const {\n    date,\n    updateSource,\n    setDate\n  } = useContext(Context);\n  const style = useRef(styleConstructor(theme));\n  const list = useRef();\n  const _topSection = useRef(sections[0]?.title);\n  const didScroll = useRef(false);\n  const sectionScroll = useRef(false);\n  const [data, setData] = useState([]);\n  const dataRef = useRef(data);\n  useEffect(() => {\n    const items = sections.reduce((acc, cur) => {\n      return [...acc, {\n        title: cur.title,\n        isTitle: true\n      }, ...cur.data];\n    }, []);\n    setData(items);\n    dataRef.current = items;\n    if (date !== _topSection.current) {\n      setTimeout(() => {\n        scrollToSection(date);\n      }, 500);\n    }\n  }, [sections]);\n  useDidUpdate(() => {\n    if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n      scrollToSection(date);\n    }\n  }, [date]);\n  const getSectionIndex = date => {\n    let dataIndex = 0;\n    for (let i = 0; i < sections.length; i++) {\n      if (sections[i].title === date) {\n        return dataIndex;\n      }\n      dataIndex += sections[i].data.length + 1;\n    }\n  };\n  const getNextSectionIndex = date => {\n    const cur = new XDate(date);\n    let dataIndex = 0;\n    for (let i = 0; i < sections.length; i++) {\n      const titleDate = parseDate(sections[i].title);\n      if (isGTE(titleDate, cur)) {\n        return dataIndex;\n      }\n      dataIndex += sections[i].data.length + 1;\n    }\n  };\n  const getSectionTitle = useCallback(title => {\n    if (!title) return;\n    let sectionTitle = title;\n    if (dayFormatter) {\n      sectionTitle = dayFormatter(title);\n    } else if (dayFormat) {\n      if (useMoment) {\n        const moment = getMoment();\n        sectionTitle = moment(title).format(dayFormat);\n      } else {\n        sectionTitle = new XDate(title).toString(dayFormat);\n      }\n    }\n    if (markToday) {\n      const string = getDefaultLocale().today || todayString;\n      const today = isToday(title);\n      sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n    }\n    return sectionTitle;\n  }, []);\n  const scrollToSection = useCallback(debounce(requestedDate => {\n    const sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n    if (isUndefined(sectionIndex)) {\n      return;\n    }\n    if (list?.current && sectionIndex !== undefined) {\n      sectionScroll.current = true;\n      if (requestedDate !== _topSection.current) {\n        _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n        list.current?.scrollToIndex(sectionIndex, true);\n      }\n      setTimeout(() => {\n        _onMomentumScrollEnd();\n      }, 500);\n    }\n  }, 1000, {\n    leading: true,\n    trailing: true\n  }), [sections]);\n  const layoutProvider = useMemo(() => new LayoutProvider(index => dataRef.current[index]?.isTitle ? 'title' : dataRef.current[index]?.itemCustomHeightType ?? 'page', (type, dim) => {\n    dim.width = constants.screenWidth;\n    switch (type) {\n      case 'title':\n        dim.height = infiniteListProps?.titleHeight ?? 60;\n        break;\n      case 'page':\n        dim.height = infiniteListProps?.itemHeight ?? 80;\n        break;\n      default:\n        dim.height = infiniteListProps?.itemHeightByType?.[type] ?? infiniteListProps?.itemHeight ?? 80;\n    }\n  }), []);\n  const _onScroll = useCallback(rawEvent => {\n    if (!didScroll.current) {\n      didScroll.current = true;\n      scrollToSection.cancel();\n    }\n    const event = {\n      nativeEvent: {\n        contentOffset: rawEvent.nativeEvent.contentOffset,\n        layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n        contentSize: rawEvent.nativeEvent.contentSize\n      }\n    };\n    onScroll?.(event);\n  }, [onScroll]);\n  const _onVisibleIndicesChanged = useCallback(all => {\n    if (all && all.length && !sectionScroll.current) {\n      const topItemIndex = all[0];\n      const topSection = data[findItemTitleIndex(topItemIndex)];\n      if (topSection && topSection !== _topSection.current) {\n        _topSection.current = topSection.title;\n        if (didScroll.current && !avoidDateUpdates) {\n          setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n        }\n      }\n    }\n  }, [avoidDateUpdates, setDate, data]);\n  const findItemTitleIndex = useCallback(itemIndex => {\n    let titleIndex = itemIndex;\n    while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n      titleIndex--;\n    }\n    return titleIndex;\n  }, [data]);\n  const _onMomentumScrollEnd = useCallback(() => {\n    sectionScroll.current = false;\n  }, []);\n  const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n  const _renderSectionHeader = useCallback(info => {\n    const title = info?.section?.title;\n    if (renderSectionHeader) {\n      return renderSectionHeader(title);\n    }\n    const headerTitle = getSectionTitle(title);\n    return _jsxDEV(AgendaSectionHeader, {\n      title: headerTitle,\n      style: headerTextStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 16\n    }, this);\n  }, [headerTextStyle]);\n  const _renderItem = useCallback((_type, item) => {\n    if (item?.isTitle) {\n      return _renderSectionHeader({\n        section: item\n      });\n    }\n    if (renderItem) {\n      return renderItem({\n        item\n      });\n    }\n    return _jsxDEV(_Fragment, {}, void 0, false);\n  }, [renderItem]);\n  const _onEndReached = useCallback(() => {\n    if (onEndReached) {\n      onEndReached({\n        distanceFromEnd: 0\n      });\n    }\n  }, [onEndReached]);\n  return _jsxDEV(InfiniteList, {\n    ref: list,\n    renderItem: _renderItem,\n    data: data,\n    style: style.current.container,\n    layoutProvider: layoutProvider,\n    onScroll: _onScroll,\n    onVisibleIndicesChanged: _onVisibleIndicesChanged,\n    scrollViewProps: Object.assign({\n      nestedScrollEnabled: true\n    }, others, {\n      onMomentumScrollEnd: _onMomentumScrollEnd\n    }),\n    onEndReached: _onEndReached,\n    onEndReachedThreshold: onEndReachedThreshold,\n    disableScrollOnDataChange: true,\n    renderFooter: infiniteListProps?.renderFooter\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 184,\n    columnNumber: 13\n  }, this);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n  dayFormat: PropTypes.string,\n  dayFormatter: PropTypes.func,\n  useMoment: PropTypes.bool,\n  markToday: PropTypes.bool,\n  sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n  avoidDateUpdates: PropTypes.bool\n};","map":{"version":3,"names":["PropTypes","isUndefined","debounce","InfiniteList","XDate","React","useCallback","useContext","useEffect","useMemo","useRef","useState","useDidUpdate","getMoment","isGTE","isToday","getDefaultLocale","UpdateSources","todayString","styleConstructor","Context","constants","parseDate","LayoutProvider","AgendaSectionHeader","jsxDEV","_jsxDEV","Fragment","_Fragment","InfiniteAgendaList","_ref","theme","sections","scrollToNextEvent","avoidDateUpdates","onScroll","renderSectionHeader","sectionStyle","dayFormatter","dayFormat","useMoment","markToday","infiniteListProps","renderItem","onEndReached","onEndReachedThreshold","others","_objectWithoutPropertiesLoose","_excluded","date","updateSource","setDate","style","list","_topSection","title","didScroll","sectionScroll","data","setData","dataRef","items","reduce","acc","cur","isTitle","current","setTimeout","scrollToSection","LIST_DRAG","CALENDAR_INIT","getSectionIndex","dataIndex","i","length","getNextSectionIndex","titleDate","getSectionTitle","sectionTitle","moment","format","toString","string","today","requestedDate","sectionIndex","undefined","findItemTitleIndex","scrollToIndex","_onMomentumScrollEnd","leading","trailing","layoutProvider","index","itemCustomHeightType","type","dim","width","screenWidth","height","titleHeight","itemHeight","itemHeightByType","_onScroll","rawEvent","cancel","event","nativeEvent","contentOffset","layoutMeasurement","contentSize","_onVisibleIndicesChanged","all","topItemIndex","topSection","itemIndex","titleIndex","headerTextStyle","sectionText","_renderSectionHeader","info","section","headerTitle","fileName","_jsxFileName","lineNumber","columnNumber","_renderItem","_type","item","_onEndReached","distanceFromEnd","ref","container","onVisibleIndicesChanged","scrollViewProps","Object","assign","nestedScrollEnabled","onMomentumScrollEnd","disableScrollOnDataChange","renderFooter","displayName","propTypes","func","bool","oneOfType","object","number","array"],"sources":["C:/Users/chaud/radha-counter/node_modules/react-native-calendars/src/expandableCalendar/AgendaList/infiniteAgendaList.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport isUndefined from 'lodash/isUndefined';\nimport debounce from 'lodash/debounce';\nimport InfiniteList from '../../infinite-list';\nimport XDate from 'xdate';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDidUpdate } from '../../hooks';\nimport { getMoment } from '../../momentResolver';\nimport { isGTE, isToday } from '../../dateutils';\nimport { getDefaultLocale } from '../../services';\nimport { UpdateSources, todayString } from '../commons';\nimport styleConstructor from '../style';\nimport Context from '../Context';\nimport constants from '../../commons/constants';\nimport { parseDate } from '../../interface';\nimport { LayoutProvider } from 'recyclerlistview/dist/reactnative/core/dependencies/LayoutProvider';\nimport { AgendaSectionHeader } from './commons';\n/**\n * @description: AgendaList component that use InfiniteList to improve performance\n * @note: Should be wrapped with 'CalendarProvider'\n * @extends: InfiniteList\n * @example: https://github.com/wix/react-native-calendars/blob/master/example/src/screens/expandableCalendar.js\n */\nconst InfiniteAgendaList = ({ theme, sections, scrollToNextEvent, avoidDateUpdates, onScroll, renderSectionHeader, sectionStyle, dayFormatter, dayFormat = 'dddd, MMM d', useMoment, markToday = true, infiniteListProps, renderItem, onEndReached, onEndReachedThreshold, ...others }) => {\n    const { date, updateSource, setDate } = useContext(Context);\n    const style = useRef(styleConstructor(theme));\n    const list = useRef();\n    const _topSection = useRef(sections[0]?.title);\n    const didScroll = useRef(false);\n    const sectionScroll = useRef(false);\n    const [data, setData] = useState([]);\n    const dataRef = useRef(data);\n    useEffect(() => {\n        const items = sections.reduce((acc, cur) => {\n            return [...acc, { title: cur.title, isTitle: true }, ...cur.data];\n        }, []);\n        setData(items);\n        dataRef.current = items;\n        if (date !== _topSection.current) {\n            setTimeout(() => {\n                scrollToSection(date);\n            }, 500);\n        }\n    }, [sections]);\n    useDidUpdate(() => {\n        // NOTE: on first init data should set first section to the current date!!!\n        if (updateSource !== UpdateSources.LIST_DRAG && updateSource !== UpdateSources.CALENDAR_INIT) {\n            scrollToSection(date);\n        }\n    }, [date]);\n    const getSectionIndex = (date) => {\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            if (sections[i].title === date) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getNextSectionIndex = (date) => {\n        const cur = new XDate(date);\n        let dataIndex = 0;\n        for (let i = 0; i < sections.length; i++) {\n            const titleDate = parseDate(sections[i].title);\n            if (isGTE(titleDate, cur)) {\n                return dataIndex;\n            }\n            dataIndex += sections[i].data.length + 1;\n        }\n    };\n    const getSectionTitle = useCallback((title) => {\n        if (!title)\n            return;\n        let sectionTitle = title;\n        if (dayFormatter) {\n            sectionTitle = dayFormatter(title);\n        }\n        else if (dayFormat) {\n            if (useMoment) {\n                const moment = getMoment();\n                sectionTitle = moment(title).format(dayFormat);\n            }\n            else {\n                sectionTitle = new XDate(title).toString(dayFormat);\n            }\n        }\n        if (markToday) {\n            const string = getDefaultLocale().today || todayString;\n            const today = isToday(title);\n            sectionTitle = today ? `${string}, ${sectionTitle}` : sectionTitle;\n        }\n        return sectionTitle;\n    }, []);\n    const scrollToSection = useCallback(debounce((requestedDate) => {\n        const sectionIndex = scrollToNextEvent ? getNextSectionIndex(requestedDate) : getSectionIndex(requestedDate);\n        if (isUndefined(sectionIndex)) {\n            return;\n        }\n        if (list?.current && sectionIndex !== undefined) {\n            sectionScroll.current = true; // to avoid setDate() in _onVisibleIndicesChanged\n            if (requestedDate !== _topSection.current) {\n                _topSection.current = sections[findItemTitleIndex(sectionIndex)]?.title;\n                list.current?.scrollToIndex(sectionIndex, true);\n            }\n            setTimeout(() => {\n                _onMomentumScrollEnd(); // the RecyclerListView doesn't trigger onMomentumScrollEnd when calling scrollToSection\n            }, 500);\n        }\n    }, 1000, { leading: true, trailing: true }), [sections]);\n    const layoutProvider = useMemo(() => new LayoutProvider((index) => dataRef.current[index]?.isTitle ? 'title' : dataRef.current[index]?.itemCustomHeightType ?? 'page', (type, dim) => {\n        dim.width = constants.screenWidth;\n        switch (type) {\n            case 'title':\n                dim.height = infiniteListProps?.titleHeight ?? 60;\n                break;\n            case 'page':\n                dim.height = infiniteListProps?.itemHeight ?? 80;\n                break;\n            default:\n                dim.height = infiniteListProps?.itemHeightByType?.[type] ?? infiniteListProps?.itemHeight ?? 80;\n        }\n    }), []);\n    const _onScroll = useCallback((rawEvent) => {\n        if (!didScroll.current) {\n            didScroll.current = true;\n            scrollToSection.cancel();\n        }\n        // Convert to a format similar to NativeSyntheticEvent<NativeScrollEvent>\n        const event = {\n            nativeEvent: {\n                contentOffset: rawEvent.nativeEvent.contentOffset,\n                layoutMeasurement: rawEvent.nativeEvent.layoutMeasurement,\n                contentSize: rawEvent.nativeEvent.contentSize\n            }\n        };\n        onScroll?.(event);\n    }, [onScroll]);\n    const _onVisibleIndicesChanged = useCallback((all) => {\n        if (all && all.length && !sectionScroll.current) {\n            const topItemIndex = all[0];\n            const topSection = data[findItemTitleIndex(topItemIndex)];\n            if (topSection && topSection !== _topSection.current) {\n                _topSection.current = topSection.title;\n                if (didScroll.current && !avoidDateUpdates) {\n                    // to avoid setDate() on first load (while setting the initial context.date value)\n                    setDate?.(topSection.title, UpdateSources.LIST_DRAG);\n                }\n            }\n        }\n    }, [avoidDateUpdates, setDate, data]);\n    const findItemTitleIndex = useCallback((itemIndex) => {\n        let titleIndex = itemIndex;\n        while (titleIndex > 0 && !data[titleIndex]?.isTitle) {\n            titleIndex--;\n        }\n        return titleIndex;\n    }, [data]);\n    const _onMomentumScrollEnd = useCallback(() => {\n        sectionScroll.current = false;\n    }, []);\n    const headerTextStyle = useMemo(() => [style.current.sectionText, sectionStyle], [sectionStyle]);\n    const _renderSectionHeader = useCallback((info) => {\n        const title = info?.section?.title;\n        if (renderSectionHeader) {\n            return renderSectionHeader(title);\n        }\n        const headerTitle = getSectionTitle(title);\n        return <AgendaSectionHeader title={headerTitle} style={headerTextStyle}/>;\n    }, [headerTextStyle]);\n    const _renderItem = useCallback((_type, item) => {\n        if (item?.isTitle) {\n            return _renderSectionHeader({ section: item });\n        }\n        if (renderItem) {\n            return renderItem({ item });\n        }\n        return <></>;\n    }, [renderItem]);\n    const _onEndReached = useCallback(() => {\n        if (onEndReached) {\n            onEndReached({ distanceFromEnd: 0 }); // The RecyclerListView doesn't provide the distanceFromEnd, so we just pass 0\n        }\n    }, [onEndReached]);\n    return (<InfiniteList ref={list} renderItem={_renderItem} data={data} style={style.current.container} layoutProvider={layoutProvider} onScroll={_onScroll} onVisibleIndicesChanged={_onVisibleIndicesChanged} scrollViewProps={{ nestedScrollEnabled: true, ...others, onMomentumScrollEnd: _onMomentumScrollEnd }} onEndReached={_onEndReached} onEndReachedThreshold={onEndReachedThreshold} disableScrollOnDataChange renderFooter={infiniteListProps?.renderFooter}/>);\n};\nexport default InfiniteAgendaList;\nInfiniteAgendaList.displayName = 'InfiniteAgendaList';\nInfiniteAgendaList.propTypes = {\n    dayFormat: PropTypes.string,\n    dayFormatter: PropTypes.func,\n    useMoment: PropTypes.bool,\n    markToday: PropTypes.bool,\n    sectionStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.number, PropTypes.array]),\n    avoidDateUpdates: PropTypes.bool\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}